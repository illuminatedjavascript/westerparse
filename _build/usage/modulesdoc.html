

<!doctype html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module Documentation &#8212; WesterParse 2020.1.0 documentation</title>
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="License" href="license.html" />
    <link rel="prev" title="The WesterParse Corpus" href="corpus.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="license.html" title="License"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="corpus.html" title="The WesterParse Corpus"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">WesterParse 2020.1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Module Documentation</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-westerparse">
<span id="module-documentation"></span><h1>Module Documentation<a class="headerlink" href="#module-westerparse" title="Permalink to this headline">¶</a></h1>
<div class="section" id="westerparse">
<h2>WesterParse<a class="headerlink" href="#westerparse" title="Permalink to this headline">¶</a></h2>
<p>WesterParse (westerparse.py) is the main program script.</p>
<p>WesterParse allows a user to test a species counterpoint exercise 
for conformity with the rules of line construction and voice leading 
laid out in Peter Westergaard’s book, <em>An Introduction to Tonal Theory</em> (New York, 1975).</p>
<p>WesterParse imports a musicxml file, converts it to a music21 stream, determines a 
key (unless specified by the user), and then evaluates the linear syntax or the counterpoint.</p>
<dl class="py function">
<dt id="westerparse.evaluateCounterpoint">
<code class="sig-prename descclassname">westerparse.</code><code class="sig-name descname">evaluateCounterpoint</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">source</span></em>, <em class="sig-param"><span class="n">report</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">sonorityCheck</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#westerparse.evaluateCounterpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines whether the voice leading conforms to Westergaard’s rules.</p>
</dd></dl>

<dl class="py function">
<dt id="westerparse.evaluateLines">
<code class="sig-prename descclassname">westerparse.</code><code class="sig-name descname">evaluateLines</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">source</span></em>, <em class="sig-param"><span class="n">show</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">partSelection</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">partLineType</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">report</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#westerparse.evaluateLines" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines whether a line is generable using Westergaard’s rules.</p>
</dd></dl>

<dl class="py function">
<dt id="westerparse.parseContext">
<code class="sig-prename descclassname">westerparse.</code><code class="sig-name descname">parseContext</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">context</span></em>, <em class="sig-param"><span class="n">show</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">partSelection</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">partLineType</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">report</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#westerparse.parseContext" title="Permalink to this definition">¶</a></dt>
<dd><p>This function runs the parse on each line of a context. 
A dictionary is used to collect error reports from the parser; this is used
to produce an error report.
A separate report is created for successful parses.
If the user has elected to display the results, the function selects the preferred
interpretations and displays them.</p>
</dd></dl>

<dl class="py function">
<dt id="westerparse.selectedPreferredParseSets">
<code class="sig-prename descclassname">westerparse.</code><code class="sig-name descname">selectedPreferredParseSets</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">context</span></em>, <em class="sig-param"><span class="n">show</span></em><span class="sig-paren">)</span><a class="headerlink" href="#westerparse.selectedPreferredParseSets" title="Permalink to this definition">¶</a></dt>
<dd><p>After parsing the individual parses, select contrapuntal sets of parses 
based on Westergaard preference rules</p>
</dd></dl>

<dl class="py function">
<dt id="westerparse.showInterpretations">
<code class="sig-prename descclassname">westerparse.</code><code class="sig-name descname">showInterpretations</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">context</span></em>, <em class="sig-param"><span class="n">show</span></em>, <em class="sig-param"><span class="n">partSelection</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">partLineType</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#westerparse.showInterpretations" title="Permalink to this definition">¶</a></dt>
<dd><p>This function builds interpretations for the context, gathering information from 
the parses of each line.</p>
</dd></dl>

</div>
<span class="target" id="module-context"></span><div class="section" id="context">
<h2>Context<a class="headerlink" href="#context" title="Permalink to this headline">¶</a></h2>
<p>The Context module includes classes to represent both global and local contexts.</p>
<p>When a global context is created, a key for the context is automatically validated 
or inferred; parts are assigned names, their rhythmic species is identified, 
a concrete tonic scale degree is selected, and list is created to collect errors; 
notes are assigned position indexes, scale degrees, placeholders for rules 
and dependency relationships, and consecutions.</p>
<p>Measure-long local harmonic contexts are also created, 
for use in parsing events in third species.</p>
<dl class="py class">
<dt id="context.Context">
<em class="property">class </em><code class="sig-prename descclassname">context.</code><code class="sig-name descname">Context</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">music21Stream</span></em><span class="sig-paren">)</span><a class="headerlink" href="#context.Context" title="Permalink to this definition">¶</a></dt>
<dd><p>An object for representing a span of a composition 
and for storing objects that represent smaller spans.</p>
</dd></dl>

<dl class="py exception">
<dt id="context.ContextError">
<em class="property">exception </em><code class="sig-prename descclassname">context.</code><code class="sig-name descname">ContextError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">desc</span></em><span class="sig-paren">)</span><a class="headerlink" href="#context.ContextError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py exception">
<dt id="context.EvaluationException">
<em class="property">exception </em><code class="sig-prename descclassname">context.</code><code class="sig-name descname">EvaluationException</code><a class="headerlink" href="#context.EvaluationException" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="context.GlobalContext">
<em class="property">class </em><code class="sig-prename descclassname">context.</code><code class="sig-name descname">GlobalContext</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">score</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#context.GlobalContext" title="Permalink to this definition">¶</a></dt>
<dd><p>An object for representing a tonally unified span of a composition 
and for storing objects that represent local spans within the global context.</p>
</dd></dl>

<dl class="py class">
<dt id="context.LocalContext">
<em class="property">class </em><code class="sig-prename descclassname">context.</code><code class="sig-name descname">LocalContext</code><a class="headerlink" href="#context.LocalContext" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<span class="target" id="module-keyFinder"></span><div class="section" id="key-finder">
<h2>Key Finder<a class="headerlink" href="#key-finder" title="Permalink to this headline">¶</a></h2>
<p>The Key Finder module examines a music21 Stream
and either validates a key provided by the user or infers a key.</p>
<p>Key inference begins by examining each part in the context to determine the scales 
in which the following criteria are met: first and last pitches are tonic-triad pitches, 
all pitches in the line belong to the scale, and at least one pitch in any leap is 
a triad pitch. The list of possibilities is collected in part.keyCandidatesFromScale.
Then each part is examined to determine the keys in which only tonic-triad
pitches are left hanging. The list of possibilities is collected in 
part.keyCandidatesFromHanging.
The lists resulting from the first two steps are sifted to see what possibilities 
are common to all parts. The results are collected in scoreKeyCandidates.
If there are still multiple options for key, the list is winnowed using two preference 
rules: (a) prefer most lines to end on tonic degree, and (b) prefer major rather than minor 
if ambiguously mixed. If winnowed to one option, the appropriate major or melodic minor scale and key are 
assigned to the context, otherwise an exception is raised and the failure to find a single
key is reported to the user.</p>
<p>Validation of a user-provided key involves two steps: the name of the key is tested 
for validity (‘Q# diminished’ is not a valid option) and the validated name is then 
tested using the same criteria as in key inference.</p>
<dl class="py exception">
<dt id="keyFinder.KeyFinderError">
<em class="property">exception </em><code class="sig-prename descclassname">keyFinder.</code><code class="sig-name descname">KeyFinderError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">desc</span></em><span class="sig-paren">)</span><a class="headerlink" href="#keyFinder.KeyFinderError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="keyFinder.inferKey">
<code class="sig-prename descclassname">keyFinder.</code><code class="sig-name descname">inferKey</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">score</span></em><span class="sig-paren">)</span><a class="headerlink" href="#keyFinder.inferKey" title="Permalink to this definition">¶</a></dt>
<dd><p>Infer a key from the parts</p>
</dd></dl>

<dl class="py function">
<dt id="keyFinder.testKey">
<code class="sig-prename descclassname">keyFinder.</code><code class="sig-name descname">testKey</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">score</span></em>, <em class="sig-param"><span class="n">knote</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">kmode</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#keyFinder.testKey" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate and test a key provided by the user</p>
</dd></dl>

</div>
<span class="target" id="module-parser"></span><div class="section" id="parser">
<h2>Parser<a class="headerlink" href="#parser" title="Permalink to this headline">¶</a></h2>
<p>The Parser (parser.py) analyzes the syntax of a melodic line. The parser is designed as a
transition-based dependency parser.</p>
<p>The parser consists of a buffer, a stack, and a scanner that shift notes from the buffer
to the stack. At initialization, the notes of the line are read into the buffer.
The scanner then shifts notes onto the stack one by one. With each shift, the transition 
is evaluated and syntax dependencies are evaluated. At each  to assemble a list of 
syntactic units. The parser maintains lists of open heads and open transitions. The lists
shrink and grow as the interpretive process unfolds. When a syntactic
unit (arc) is formed (e.g., a passing or neighboring motion), a representation of 
the unit is placed in the list of arcs as a tuple of note positions.
Meanwhile, dependent elements are removed from the stack and the list of open transitions,
leaving structural heads for subsequent attachment. The first stage of parsing ends 
when the buffer is empty and the stack is cleared. The parser has a limited ability to 
backtrack and reinterpret segments of a line.</p>
<p>[Interpretation continues by line type]. The parser gathers all of the valid interpretations
into lists. The parser also records errors that arise.</p>
<p>Procedure: (1) accept a part from a Context, (2) infer the possible lineTypes if not 
given in advance, (3) parse the part for each possible lineType, (4) return 
a set of parses and errors.</p>
<dl class="py class">
<dt id="parser.Parser">
<em class="property">class </em><code class="sig-prename descclassname">parser.</code><code class="sig-name descname">Parser</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">part</span></em>, <em class="sig-param"><span class="n">context</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#parser.Parser" title="Permalink to this definition">¶</a></dt>
<dd><p>The Parser class is the engine of the parse. The bulk of the work is done
by parseTransition(). After a preliminary parse of the line,
the parser decides on a set of possible structural interpretations and creates
a Parse object to store each interpretation.</p>
<dl class="py class">
<dt id="parser.Parser.Parse">
<em class="property">class </em><code class="sig-name descname">Parse</code><a class="headerlink" href="#parser.Parser.Parse" title="Permalink to this definition">¶</a></dt>
<dd><p>An object for holding a parsed interpretation</p>
<dl class="py method">
<dt id="parser.Parser.Parse.arcEmbed">
<code class="sig-name descname">arcEmbed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">arc1</span></em>, <em class="sig-param"><span class="n">arc2</span></em><span class="sig-paren">)</span><a class="headerlink" href="#parser.Parser.Parse.arcEmbed" title="Permalink to this definition">¶</a></dt>
<dd><p>A function for for embedding a repetition inside a passing motion.</p>
</dd></dl>

<dl class="py method">
<dt id="parser.Parser.Parse.arcMerge">
<code class="sig-name descname">arcMerge</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">arc1</span></em>, <em class="sig-param"><span class="n">arc2</span></em><span class="sig-paren">)</span><a class="headerlink" href="#parser.Parser.Parse.arcMerge" title="Permalink to this definition">¶</a></dt>
<dd><p>A function for combining two passing motions that share an inner node and direction.</p>
</dd></dl>

<dl class="py method">
<dt id="parser.Parser.Parse.assignSecondaryRules">
<code class="sig-name descname">assignSecondaryRules</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parser.Parser.Parse.assignSecondaryRules" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="parser.Parser.Parse.attachOpenheadsToStructuralLefthead">
<code class="sig-name descname">attachOpenheadsToStructuralLefthead</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">structuralLefthead</span></em>, <em class="sig-param"><span class="n">rightLimit</span></em><span class="sig-paren">)</span><a class="headerlink" href="#parser.Parser.Parse.attachOpenheadsToStructuralLefthead" title="Permalink to this definition">¶</a></dt>
<dd><p>Examines the span between a structural lefthead and a righthand limit,
looking for notes that are either head of an arc (left or right) or not embedded in an arc,
and can be taken as a repetition of the structural lefthead.
This function increases the coherence of a parse.</p>
</dd></dl>

<dl class="py method">
<dt id="parser.Parser.Parse.displayFullParse">
<code class="sig-name descname">displayFullParse</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parser.Parser.Parse.displayFullParse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="parser.Parser.Parse.gatherParentheses">
<code class="sig-name descname">gatherParentheses</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parser.Parser.Parse.gatherParentheses" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="parser.Parser.Parse.gatherRuleLabels">
<code class="sig-name descname">gatherRuleLabels</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parser.Parser.Parse.gatherRuleLabels" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="parser.Parser.Parse.integrateSecondaryWithPrimary">
<code class="sig-name descname">integrateSecondaryWithPrimary</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parser.Parser.Parse.integrateSecondaryWithPrimary" title="Permalink to this definition">¶</a></dt>
<dd><p>Revise an intepretation to make it tighter, more efficient, more coherent. 
Connect secondary structures to elements of the basic structure where possible.</p>
</dd></dl>

<dl class="py method">
<dt id="parser.Parser.Parse.parseBass">
<code class="sig-name descname">parseBass</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parser.Parser.Parse.parseBass" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="parser.Parser.Parse.parseGeneric">
<code class="sig-name descname">parseGeneric</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parser.Parser.Parse.parseGeneric" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="parser.Parser.Parse.parsePrimary">
<code class="sig-name descname">parsePrimary</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parser.Parser.Parse.parsePrimary" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses eight different methods to find a basic step motion from a potential S2:
(a) Look for one existing basic step motion arc that starts from S2.
(b) Look for an existing basic step motion arc that can be attached to S2 
(repetition + passing)
(c) Look for two arcs that can fused into a basic step motion
(passing + neighbor/repetition). 
(d) Look for two arcs that can be merged into a basic step motion 
(passing + passing).
(e) Look for three arcs that can be merged into a basic step motion 
(passing + passing + passing).
(f) Take an existing 5-4-3 arc (the longest spanned, if more than one) and 
try to find a connection -2-1 to complete a basic arc.
(g) Look for a nonfinal arc from S2 whose terminus == S1.csd.value, and
extend the arc to end on S1Index if possible.
(h) Reinterpret the line, looking for a descending step motion from S2 and then
parsing the remaining notes. The least reliable method.</p>
</dd></dl>

<dl class="py method">
<dt id="parser.Parser.Parse.performLineParse">
<code class="sig-name descname">performLineParse</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parser.Parser.Parse.performLineParse" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct an arc for the basic structure, given the line type.</p>
</dd></dl>

<dl class="py method">
<dt id="parser.Parser.Parse.pruneArcs">
<code class="sig-name descname">pruneArcs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parser.Parser.Parse.pruneArcs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="parser.Parser.Parse.setDependencyLevels">
<code class="sig-name descname">setDependencyLevels</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parser.Parser.Parse.setDependencyLevels" title="Permalink to this definition">¶</a></dt>
<dd><p>Review a completed parse and determine the structural level of each note</p>
</dd></dl>

<dl class="py method">
<dt id="parser.Parser.Parse.testLocalResolutions">
<code class="sig-name descname">testLocalResolutions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parser.Parser.Parse.testLocalResolutions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py method">
<dt id="parser.Parser.buildParse">
<code class="sig-name descname">buildParse</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cand</span></em>, <em class="sig-param"><span class="n">lineType</span></em>, <em class="sig-param"><span class="n">parsecounter</span></em>, <em class="sig-param"><span class="n">stack</span></em>, <em class="sig-param"><span class="n">buildErrors</span></em>, <em class="sig-param"><span class="n">method</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#parser.Parser.buildParse" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up the basic features of the parse object
and then execute the parsing process.
Use deep copies of the arcs and notes, as the list of arcs and the
properties of notes will be altered during the process.</p>
</dd></dl>

<dl class="py method">
<dt id="parser.Parser.collectParses">
<code class="sig-name descname">collectParses</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parser.Parser.collectParses" title="Permalink to this definition">¶</a></dt>
<dd><p>Collect all the attempted parses of a line from Parser (self.parses) 
and discard any that have errors and thus failed. 
Also remove parses if their basic arc was produced by a more reliable method.</p>
</dd></dl>

<dl class="py method">
<dt id="parser.Parser.inferLineTypes">
<code class="sig-name descname">inferLineTypes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parser.Parser.inferLineTypes" title="Permalink to this definition">¶</a></dt>
<dd><p>If the line type is not specified, infer a set of possibilities.</p>
</dd></dl>

<dl class="py method">
<dt id="parser.Parser.parseTransition">
<code class="sig-name descname">parseTransition</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stack</span></em>, <em class="sig-param"><span class="n">buffer</span></em>, <em class="sig-param"><span class="n">part</span></em>, <em class="sig-param"><span class="n">i</span></em>, <em class="sig-param"><span class="n">j</span></em>, <em class="sig-param"><span class="n">harmonyStart</span></em>, <em class="sig-param"><span class="n">harmonyEnd</span></em>, <em class="sig-param"><span class="n">openHeads</span></em>, <em class="sig-param"><span class="n">openTransitions</span></em>, <em class="sig-param"><span class="n">arcs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#parser.Parser.parseTransition" title="Permalink to this definition">¶</a></dt>
<dd><p>The parser asks a series of questions at the transition from note I to note J. 
What is their relation to the harmony of the context (tonic, in the case of global contexts)? 
What is their intervallic relation (step or skip)?
How does J connect, if at all, with notes in the dynamic lists of open heads and transitions.  
Based on the answers, the parser assigns dependency relations, creates arcs where warranted, 
or returns error messages if the line is syntactically malformed.</p>
</dd></dl>

<dl class="py method">
<dt id="parser.Parser.preParseLine">
<code class="sig-name descname">preParseLine</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parser.Parser.preParseLine" title="Permalink to this definition">¶</a></dt>
<dd><p>Conduct a preliminary parse of the line. 
Initialize the buffer, stack, and arcs. 
Initialize the lists of open heads and transitions. 
Set the global harmonic referents.
Run the scanner, parsing each transition.</p>
</dd></dl>

<dl class="py method">
<dt id="parser.Parser.prepareParses">
<code class="sig-name descname">prepareParses</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parser.Parser.prepareParses" title="Permalink to this definition">¶</a></dt>
<dd><p>After preliminary parsing is completed, determine possibiities
for basic structures based on available line types and parse the line
using each candidate for basic structure. The results will be collected
in self.parses.</p>
</dd></dl>

<dl class="py method">
<dt id="parser.Parser.selectPreferredParses">
<code class="sig-name descname">selectPreferredParses</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parser.Parser.selectPreferredParses" title="Permalink to this definition">¶</a></dt>
<dd><p>Input a list of successful interpretations from Parser (self.parses)
and remove those that do not conform to cognitive preference rules</p>
</dd></dl>

<dl class="py method">
<dt id="parser.Parser.testGenerabilityFromLevels">
<code class="sig-name descname">testGenerabilityFromLevels</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#parser.Parser.testGenerabilityFromLevels" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a parse in which rule levels have been assigned (perhaps by the student),
determine whether the line is generable in that way.</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-vlChecker"></span><div class="section" id="voice-leading-checker">
<h2>Voice Leading Checker<a class="headerlink" href="#voice-leading-checker" title="Permalink to this headline">¶</a></h2>
<p>The Voice Leading Checker module takes a score with two or more parts (lines)
and examines the local voice leading for conformity with Westergaard’s rules of species counterpoint.</p>
</div>
<span class="target" id="module-dependency"></span><div class="section" id="dependency">
<h2>Dependency<a class="headerlink" href="#dependency" title="Permalink to this headline">¶</a></h2>
<p>The Dependency class stores syntactic dependency relationships among notes in the form
of references to a lefthand head, a righthand head, and dependents.</p>
<p>A passing tone in the space of a third, for example, stores a reference to 
a lefthead and a righthead, but not to any dependents. The note that initiates the 
passing motion, by contrast, has one dependent (the passing tone) but no left- or 
righthead. An anticipation stores a reference to a righthead, but has no 
lefthead and no dependents.</p>
<dl class="py class">
<dt id="dependency.Dependency">
<em class="property">class </em><code class="sig-prename descclassname">dependency.</code><code class="sig-name descname">Dependency</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">keywords</span></em><span class="sig-paren">)</span><a class="headerlink" href="#dependency.Dependency" title="Permalink to this definition">¶</a></dt>
<dd><p>An object for storing the dependencies of a note in a line</p>
</dd></dl>

<dl class="py exception">
<dt id="dependency.DependencyException">
<em class="property">exception </em><code class="sig-prename descclassname">dependency.</code><code class="sig-name descname">DependencyException</code><a class="headerlink" href="#dependency.DependencyException" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<span class="target" id="module-rule"></span><div class="section" id="rule">
<h2>Rule<a class="headerlink" href="#rule" title="Permalink to this headline">¶</a></h2>
<p>The Rule class stores information about a note’s syntactic function.</p>
<dl class="py class">
<dt id="rule.Rule">
<em class="property">class </em><code class="sig-prename descclassname">rule.</code><code class="sig-name descname">Rule</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">lineType</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">scope</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">level</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">index</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#rule.Rule" title="Permalink to this definition">¶</a></dt>
<dd><p>A rule that can be assigned as an attribute to a Note in a Line. A rule 
has a name (e.g., ‘S2’) and a level. For display purposes, rule names are appended 
to notes as lyrics.</p>
</dd></dl>

</div>
<span class="target" id="module-csd"></span><div class="section" id="concrete-scale-degree-csd">
<h2>Concrete Scale Degree (CSD)<a class="headerlink" href="#concrete-scale-degree-csd" title="Permalink to this headline">¶</a></h2>
<dl class="py exception">
<dt id="csd.CSDError">
<em class="property">exception </em><code class="sig-prename descclassname">csd.</code><code class="sig-name descname">CSDError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">desc</span></em><span class="sig-paren">)</span><a class="headerlink" href="#csd.CSDError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="csd.ConcreteScaleDegree">
<em class="property">class </em><code class="sig-prename descclassname">csd.</code><code class="sig-name descname">ConcreteScaleDegree</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">p</span></em>, <em class="sig-param"><span class="n">scale</span></em><span class="sig-paren">)</span><a class="headerlink" href="#csd.ConcreteScaleDegree" title="Permalink to this definition">¶</a></dt>
<dd><p>A scale degree value based on an actual pitch object. 
Tonic = 0. Leading tone = -1. The upper octave = 7. The fifth above = 4. 
Scale degree residue classes are easily inferred from these values using mod7.</p>
</dd></dl>

</div>
<span class="target" id="module-consecutions"></span><div class="section" id="consecutions">
<h2>Consecutions<a class="headerlink" href="#consecutions" title="Permalink to this headline">¶</a></h2>
<p>The Consecutions class stores information about how a note in a line is approached and left. 
This should be converted to a method.</p>
<dl class="py class">
<dt id="consecutions.Consecutions">
<em class="property">class </em><code class="sig-prename descclassname">consecutions.</code><code class="sig-name descname">Consecutions</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">targetNote</span></em>, <em class="sig-param"><span class="n">leftNote</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">rightNote</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#consecutions.Consecutions" title="Permalink to this definition">¶</a></dt>
<dd><p>An object holding the generic types of melodic consecution for a note to the 
left and right (approach and departure): the interval, its direction, and the consecution type
(‘same’, ‘step’, ‘skip’, None) are calculated from a three-note linear segment.</p>
</dd></dl>

</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/WesterParseLogo.png" alt="Logo"/>
            </a></p>
<h3><a href="../index.html">Table of Contents</a></h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="userguide.html">User’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="speciesrules.html">The Westergaard Rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="speciesguide.html">A Brief Introduction to Westergaardian Species Counterpoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="corpus.html">The WesterParse Corpus</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Module Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#westerparse">WesterParse</a></li>
<li class="toctree-l2"><a class="reference internal" href="#context">Context</a></li>
<li class="toctree-l2"><a class="reference internal" href="#key-finder">Key Finder</a></li>
<li class="toctree-l2"><a class="reference internal" href="#parser">Parser</a></li>
<li class="toctree-l2"><a class="reference internal" href="#voice-leading-checker">Voice Leading Checker</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dependency">Dependency</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rule">Rule</a></li>
<li class="toctree-l2"><a class="reference internal" href="#concrete-scale-degree-csd">Concrete Scale Degree (CSD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#consecutions">Consecutions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="license.html" title="License"
             >next</a> |</li>
        <li class="right" >
          <a href="corpus.html" title="The WesterParse Corpus"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">WesterParse 2020.1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Module Documentation</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Robert Snarrenberg.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.1.1.
    </div>
  </body>
</html>